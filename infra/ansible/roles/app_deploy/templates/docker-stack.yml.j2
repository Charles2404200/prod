# docker-stack.yml.j2 (only the env blocks shown)
  backend:
    image: "{{ backend_image }}:{{ image_tag }}"
    environment:
      HOST: "0.0.0.0"      # <-- add this
      PORT: "3000"
      MONGO_URI: "mongodb://db:27017/{{ mongo_db_name | default('rmit_database') }}"
      JWT_SECRET: "{{ jwt_secret | default('change_me_in_jenkins_or_group_vars') }}"
      CLIENT_URL: "http://localhost"
    ports:
      - "{{ backend_published | default(13000) }}:3000"

  frontend:
    image: "{{ frontend_image }}:{{ image_tag }}"
    environment:
      HOST: "0.0.0.0"      # <-- add this
      PORT: "8080"         # only if your FE server reads it
      API_URL: "/api"      # keep same-origin via NGINX
    ports:
      - "{{ frontend_published | default(18080) }}:8080"
